<!doctype html>
<html>
  <head>
    <title>Hello, http request helper fun</title>
  </head>
  <body>
    <h1>Hello, http request helper fun</h1>
    <h2>At the time of writing, this example only works on Firefox</h2>
    <p>Have a look at the console</p>
    <script>
      "use strict";

      function httpRequest(url, callback) {
        var req = new XMLHttpRequest();
        req.open("GET", url, true);
        req.addEventListener("load", function() {
          if (req.status < 400) {
            callback(req.responseText);
          }
        });
        req.send(null);
      }

      httpRequest("example/fruit.json", function(responseText) {
        console.log("async request has completed!!!");
        var fruits = JSON.parse(responseText);
        console.log(fruits.length);
        fruits.forEach(function(fruit, index) {
          console.log(index, ":", fruit);
          console.log(fruit.name);
          console.log("=======================");
        });
      });
    </script>
  </body>
</html>
